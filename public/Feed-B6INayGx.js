const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["public/index-wjaS0caF.js","public/index-C_N0sg9n.css"])))=>i.map(i=>d[i]);
import{q as v,s as B,r as n,_ as S,u as E,j as e,A as _,F as I,t as L,S as A,v as C}from"./index-wjaS0caF.js";const D=a=>{const{refetch:c}=v(B,{context:{apiName:"read"},fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",returnPartialData:!1,variables:{cursor:a}});return{listBinaryImagePosts:async m=>{const{data:x,loading:i,error:r}=await c({cursor:m});return{data:x,loading:i,error:r}}}},w=n.lazy(()=>S(()=>import("./index-wjaS0caF.js").then(a=>a.ab),__vite__mapDeps([0,1]))),F=()=>{const[a,c]=n.useState([]),[f,m]=n.useState(null),[x,i]=n.useState(!0),[r,y]=n.useState(null),[b,p]=n.useState(null),{listBinaryImagePosts:j}=D(""),{t:P}=E(),k=async t=>{const{data:s,loading:o,error:l}=await j(t);if(o){i(o);return}if(l){m(l);return}if(s&&s.listBinaryImagePosts&&s.listBinaryImagePosts.data){const h=s.listBinaryImagePosts.data.map((d,N)=>({...d,key:`${t}-${N}`})),u=new Set(a.map(d=>d.key)),g=[...a,...h.filter(d=>!u.has(d.key))];i(!1),c(g),y(s.listBinaryImagePosts.meta),p(s.listBinaryImagePosts.meta.cursor)}};return n.useLayoutEffect(()=>{(async()=>{const{data:s,loading:o,error:l}=await j("");if(o){i(o);return}if(l){m(l);return}const h=s.listBinaryImagePosts.data.map((u,g)=>({...u,key:`initial-${g}`}));i(!1),c(h),y(s.listBinaryImagePosts.meta),p(s.listBinaryImagePosts.meta.cursor)})()},[]),x?e.jsxs("div",{className:"flex-inline items-center justify-center lg:py-8 px-12 max-w-screen-lg mx-auto w-full xs:px-1 md:px-4 pb-1 pt-8",children:[e.jsx(w,{id:"loading",entryId:"",author:"",posted:new Date,image:"",width:1084,height:506},void 0),e.jsx("span",{className:"sr-only",children:"Loading..."})]}):f?e.jsxs(_,{color:"failure",children:[e.jsx(I,{icon:L}),e.jsx("span",{className:"font-medium",children:"Oh dang!"})," There was an error loading more posts."]}):e.jsx("div",{id:"feed",children:e.jsxs("div",{className:"flex-inline items-center justify-center lg:py-8 px-12 max-w-screen-lg mx-auto w-full xs:px-1 md:px-4 pb-1 pt-8",children:[e.jsx("h4",{className:"h4 sm:hidden mb-2 text-left text-2xl font-bold dark:text-white xs:hidden",children:P("feed.title")}),a.map(t=>e.jsx(n.Suspense,{fallback:e.jsx("span",{className:"w-full xs:h-[386px] sm:h-[430px] md:h-[645px] lg:h-[778px] flex items-center justify-center",children:e.jsx(A,{})}),children:e.jsx(w,{entryId:t.entryId,id:t.id,author:t.author,posted:t.posted,image:t.image,width:t.width,height:t.height},t.key)},t.key)),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("span",{className:"text-sm text-gray-100 dark:text-gray-300",children:["Showing ",e.jsx("span",{className:"font-bold text-gray-100 dark:text-white",children:a.length})," of ",e.jsx("span",{className:"font-bold text-gray-100 dark:text-white",children:r==null?void 0:r.totalCount})," Entries"]}),e.jsx("div",{className:"inline-flex mt-2 mb-4 xs:mt-0",children:r&&r.hasMoreItems&&r.cursor!==null&&e.jsxs("button",{onClick:()=>k(b),className:"flex items-center justify-center px-4 h-10 text-base font-medium text-gray-900 bg-gray-200 border-0 border-s border-gray-700 rounded-md hover:bg-gray-300 dark:bg-slate-900 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-slate-700 dark:hover:text-white transition duration-300 ease-in-out",children:[P("feed.loadmore"),e.jsx(I,{icon:C,className:"ml-2"})]})})]})]})})};export{F as default};
//# sourceMappingURL=Feed-B6INayGx.js.map
